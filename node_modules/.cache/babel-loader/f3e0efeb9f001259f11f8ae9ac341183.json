{"ast":null,"code":"import _toConsumableArray from\"/home/mario/Documentos/projects/portafolio/app-clima/cliente/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/home/mario/Documentos/projects/portafolio/app-clima/cliente/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useRef}from\"react\";import socket from\"../Socket\";import{Input,Row,Col,Form,Button}from\"antd\";import'./sala.scss';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var TextArea=Input.TextArea;export default function Sala(_ref){var nombre=_ref.nombre;var _Form$useForm=Form.useForm(),_Form$useForm2=_slicedToArray(_Form$useForm,1),form=_Form$useForm2[0];var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),mensaje=_useState2[0],setMensaje=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),mensajes=_useState4[0],setMensajes=_useState4[1];var divRef=useRef(null);var passwordInput=useRef(null);useEffect(function(){socket.emit(\"conectado\",nombre);},[nombre]);useEffect(function(){socket.on(\"mensajes\",function(mensaje){setMensajes([].concat(_toConsumableArray(mensajes),[mensaje]));});return function(){socket.off();};},[mensajes]);var submit=function submit(){socket.emit(\"mensaje\",nombre,mensaje);resetForm();passwordInput.current.focus();};useEffect(function(){divRef.current.scrollTop=divRef.current.scrollHeight;});var resetForm=function resetForm(){form.resetFields();};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{ref:divRef,className:\"chat\",children:mensajes.map(function(e,i){return/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsxs(\"strong\",{children:[e.nombre,\": \"]}),\" \",/*#__PURE__*/_jsx(\"small\",{children:e.mensaje})]},i);})}),/*#__PURE__*/_jsxs(Form,{onFinish:submit,form:form,children:[/*#__PURE__*/_jsx(Form.Item,{name:\"mensaje\",value:mensaje,children:/*#__PURE__*/_jsx(Input,{onChange:function onChange(e){return setMensaje(e.target.value);},addonBefore:nombre,autofocus:\"autofocus\"})}),/*#__PURE__*/_jsx(Form.Item,{children:/*#__PURE__*/_jsx(Button,{type:\"primary\",htmlType:\"submit\",children:\"Enviar\"})})]})]});}","map":{"version":3,"sources":["/home/mario/Documentos/projects/portafolio/app-clima/cliente/src/components/Chat/Sala/Sala.jsx"],"names":["React","useState","useEffect","useRef","socket","Input","Row","Col","Form","Button","TextArea","Sala","nombre","useForm","form","mensaje","setMensaje","mensajes","setMensajes","divRef","passwordInput","emit","on","off","submit","resetForm","current","focus","scrollTop","scrollHeight","resetFields","map","e","i","target","value"],"mappings":"8WAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,CAAqCC,MAArC,KAAmD,OAAnD,CACA,MAAOC,CAAAA,MAAP,KAAmB,WAAnB,CACA,OAASC,KAAT,CAAgBC,GAAhB,CAAqBC,GAArB,CAA0BC,IAA1B,CAAgCC,MAAhC,KAA8C,MAA9C,CAEA,MAAO,aAAP,C,gJAEQC,CAAAA,Q,CAAaL,K,CAAbK,Q,CAER,cAAe,SAASC,CAAAA,IAAT,MAA0B,IAAVC,CAAAA,MAAU,MAAVA,MAAU,mBACtBJ,IAAI,CAACK,OAAL,EADsB,gDAC9BC,IAD8B,iCAEPb,QAAQ,CAAC,EAAD,CAFD,wCAE9Bc,OAF8B,eAErBC,UAFqB,8BAGLf,QAAQ,CAAC,EAAD,CAHH,yCAG9BgB,QAH8B,eAGpBC,WAHoB,eAIrC,GAAMC,CAAAA,MAAM,CAAGhB,MAAM,CAAC,IAAD,CAArB,CACA,GAAMiB,CAAAA,aAAa,CAAGjB,MAAM,CAAC,IAAD,CAA5B,CAKFD,SAAS,CAAC,UAAM,CACdE,MAAM,CAACiB,IAAP,CAAY,WAAZ,CAAyBT,MAAzB,EACD,CAFQ,CAEN,CAACA,MAAD,CAFM,CAAT,CAIAV,SAAS,CAAC,UAAM,CACdE,MAAM,CAACkB,EAAP,CAAU,UAAV,CAAsB,SAACP,OAAD,CAAa,CACjCG,WAAW,8BAAKD,QAAL,GAAeF,OAAf,GAAX,CACD,CAFD,EAIA,MAAO,WAAM,CACXX,MAAM,CAACmB,GAAP,GACD,CAFD,CAGD,CARQ,CAQN,CAACN,QAAD,CARM,CAAT,CAYA,GAAMO,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAM,CACnBpB,MAAM,CAACiB,IAAP,CAAY,SAAZ,CAAuBT,MAAvB,CAA+BG,OAA/B,EACAU,SAAS,GACTL,aAAa,CAACM,OAAd,CAAsBC,KAAtB,GACD,CAJD,CAQAzB,SAAS,CAAC,UAAM,CACdiB,MAAM,CAACO,OAAP,CAAeE,SAAf,CAA2BT,MAAM,CAACO,OAAP,CAAeG,YAA1C,CACD,CAFQ,CAAT,CAMA,GAAMJ,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAK,CACrBX,IAAI,CAACgB,WAAL,GACD,CAFD,CAMA,mBACE,wCACE,YAAK,GAAG,CAAEX,MAAV,CAAkB,SAAS,CAAC,MAA5B,UACGF,QAAQ,CAACc,GAAT,CAAa,SAACC,CAAD,CAAIC,CAAJ,qBAEV,kCACA,0BAASD,CAAC,CAACpB,MAAX,QADA,kBAC8B,uBAAQoB,CAAC,CAACjB,OAAV,EAD9B,GAAQkB,CAAR,CAFU,EAAb,CADH,EADF,cAYQ,MAAC,IAAD,EAAM,QAAQ,CAAET,MAAhB,CAAwB,IAAI,CAAEV,IAA9B,wBACI,KAAC,IAAD,CAAM,IAAN,EACA,IAAI,CAAC,SADL,CAEA,KAAK,CAAEC,OAFP,uBAKA,KAAC,KAAD,EACI,QAAQ,CAAE,kBAACiB,CAAD,QAAOhB,CAAAA,UAAU,CAACgB,CAAC,CAACE,MAAF,CAASC,KAAV,CAAjB,EADd,CAEI,WAAW,CAAEvB,MAFjB,CAGI,SAAS,CAAC,WAHd,EALA,EADJ,cAYI,KAAC,IAAD,CAAM,IAAN,wBACA,KAAC,MAAD,EAAQ,IAAI,CAAC,SAAb,CAAuB,QAAQ,CAAC,QAAhC,oBADA,EAZJ,GAZR,GADF,CAkCD","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport socket from \"../Socket\";\nimport { Input, Row, Col, Form, Button } from \"antd\";\n\nimport './sala.scss'\n\nconst { TextArea } = Input;\n\nexport default function Sala({ nombre }) {\n    const [form] = Form.useForm();\n    const [mensaje, setMensaje] = useState(\"\");\n    const [mensajes, setMensajes] = useState([]);\n    const divRef = useRef(null);\n    const passwordInput = useRef(null);\n\n    \n \n    \n  useEffect(() => {\n    socket.emit(\"conectado\", nombre);\n  }, [nombre]);\n\n  useEffect(() => {\n    socket.on(\"mensajes\", (mensaje) => {\n      setMensajes([...mensajes, mensaje]);\n    });\n\n    return () => {\n      socket.off();\n    };\n  }, [mensajes]);\n\n  \n\n  const submit = () => {\n    socket.emit(\"mensaje\", nombre, mensaje);\n    resetForm();\n    passwordInput.current.focus();\n  };\n\n\n\n  useEffect(() => {\n    divRef.current.scrollTop = divRef.current.scrollHeight;\n  });\n\n  \n\n  const resetForm = () =>{\n    form.resetFields();\n  }\n\n  \n   \n  return (\n    <>\n      <div ref={divRef} className=\"chat\">\n        {mensajes.map((e, i) => (\n            \n            <p key={i}>\n            <strong>{e.nombre}: </strong> <small>{e.mensaje}</small> \n            </p>            \n        ))}\n    \n        </div> \n\n        \n            <Form onFinish={submit} form={form}>\n                <Form.Item \n                name=\"mensaje\"\n                value={mensaje}\n                >\n\n                <Input\n                    onChange={(e) => setMensaje(e.target.value)}\n                    addonBefore={nombre}\n                    autofocus=\"autofocus\"\n                />\n                </Form.Item>\n                <Form.Item>\n                <Button type=\"primary\" htmlType=\"submit\">Enviar</Button>\n                </Form.Item>\n            </Form>\n            \n         \n      \n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}